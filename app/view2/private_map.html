    <script>
        var mapManager;
        $(document).ready(function () {
            $('#markAreaBtn').click(function () {
                mapManager.triggerMarkAreaClick();
            });
            $('.disasterType').change(function () {
                mapManager.setDisasterType($(this).val());
            });
            $('.areaList li').click(function () {
                $(this).siblings().removeClass('active');
                $(this).addClass('active');
                mapManager.setDisasterType($(this).attr('disasterType'));
            });
            $('.modifyAreaForm .closeIcon').click(function () {
                $('.modifyAreaForm').hide();
            });
            $('#saveMapBtn').click(function () {
                mapManager.saveMap();
            });
            $('#toggleEditBtn').click(function () {
                if ($(this).hasClass('active')) {
                    $(this).removeClass('active').text('Edit mode: Off');
                    mapManager.setEditable(false);
                }
                else {
                    $(this).addClass('active').text('Edit mode: On');
                    mapManager.setEditable(true);
                    dehighlightAllAreas();
                }
            });
            $('#clearMapBtn').click(function () {
                mapManager.clearMap();
                $('.modifyAreaForm').hide();
            });
            setTimeout(function () {
                mapManager.clearMap();
                //Input url here************* Uncomment below
                /*$.get('', function (rawJson) {
                    loadMap(rawJson);
                }); */
                //Sample load data
                loadMap(JSON.stringify([{ "coordinates": [{ "lat": 1.397562659547266, "lng": 103.70304107666016 }, { "lat": 1.40374062266067, "lng": 103.7270736694336 }, { "lat": 1.3447060959795738, "lng": 103.7160873413086}], "disaster": "Zombie", "type": "Polygon", "name": "Area1", "time": "2016-10-25T17:41:11.176Z" }, { "coordinates": [{ "lat": 1.4215879797063258, "lng": 103.73531341552734 }, { "lat": 1.4229608476328477, "lng": 103.7710189819336 }, { "lat": 1.3117559678296862, "lng": 103.7710189819336 }, { "lat": 1.318620614005517, "lng": 103.74149322509766}], "disaster": "Terminator", "type": "Polygon", "name": "Area2", "time": "2016-10-25T17:41:15.876Z" }, { "coordinates": [{ "lat": 1.3804015658498483, "lng": 103.80741119384766 }, { "lat": 1.3762828848738569, "lng": 103.9200210571289 }, { "lat": 1.3694184007839654, "lng": 103.86165618896484}], "disaster": "Fire", "type": "Polygon", "name": "Area3", "time": "2016-10-25T17:41:23.126Z" }, { "coordinates": [{ "lat": 1.4174693710318358, "lng": 103.87813568115234}], "disaster": "Safehouse", "type": "Point", "name": "Point4", "time": "2016-10-25T17:41:25.872Z" }, { "coordinates": [{ "lat": 1.3042048352878455, "lng": 103.87676239013672}], "disaster": "Safehouse", "type": "Point", "name": "Point6", "time": "2016-10-25T17:41:26.956Z" }, { "coordinates": [{ "lat": 1.3213664671805336, "lng": 103.6831283569336}], "disaster": "Safehouse", "type": "Point", "name": "Point7", "time": "2016-10-25T17:41:27.804Z"}]));
            }, 500);

            $('#submitFormBtn').click(function () {
                var targetArea = $(this).data('area');
                targetArea.name = $('.crisisReportForm #nameReport').val();
                targetArea.description = $('.crisisReportForm #descriptionReport').val();
                targetArea.location = $('.crisisReportForm #locationReport').val();
                targetArea.severity = $('.crisisReportForm #severityReport').val();
                var serializer = new Serializer();
                var newSerializedArea = serializer.serializeArea(targetArea);
                //Input url here************* Uncomment below
                // $.post('', { json: newSerializedArea }, function (data) { });
                $('.crisisReportForm').hide();
            });
        });
        function initMap() {
            mapManager = new MapManager();
            mapManager.initializeMap(document.getElementById('map'));
            mapManager.areaManager.onAreaChangeCallback = function (area) {
                createNewAreaItem(area);
            };
            mapManager.areaManager.onAreaLoadCallback = function (areas) {
                for (var i = 0; i < areas.length; i++) {
                    createNewAreaItem(areas[i]);
                }
                $('.crisisReportForm').hide();
            }
            mapManager.onAreaSpaceClickCallback = function (area) {
            }
        }
        //UI code
        function createNewAreaItem(area) {
            $('.crisisReportForm').show();
            $('.crisisReportForm input').val('');
            $('#submitFormBtn').data('area', area);
        }
        /* function dehighlightAllAreas() {
        $('.areaList li').each(function () {
        $(this).removeClass('active');
        mapManager.deHighlightArea($(this).data('area'));
        });
        } */
        function fillModifyForm(area) {
            $('.modifyAreaForm .areaName').val(area.name);
            $('.modifyAreaForm .areaType').text(mapManager.getDisasterName(area.disaster));
        }
        function loadMap(raw) {
            mapManager.loadMap(raw);
        }
            </script> 
        <script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyCanXJuqR9G83t3TPpOBySHq-4gx2_7DUA&callback=initMap" async defer></script>
    
<div class="mapWrapper">
            <div class="innerMapWrapper">
            <div id="map"></div>
                <div class="mapInfoPopup">
                    <div class="mapInfoPopupInnerWrapper">
                    <div class="crisisLabel">Crisis: Thunderstorm</div>
                    <div class="severityLabel">Severity: 
           <span class="radio"><span class="innerRadio"></span></span>
           <span class="radio"><span class="innerRadio"></span></span>
           <span class="radio"><span class="innerRadio"></span></span>
           <span class="radio"><span class="innerRadio"></span></span>
           <span class="radio"><span class="innerRadio"></span></span>
                    </div>
                        </div>
                </div>
            <div class="verticalOptionsWrapper">
        <div class="verticalOptions">
            <div class="typeWrapper">
             <span class="typeLabel">Type</span></div>
            <ul class="areaList">
                <li class="zombie active" disasterType="Zombie"><img src="images/zombieicon.png" class="icon">Zombie</li>
                <li class="terminator" disasterType="Terminator"><img src="images/terminatoricon.png" class="icon">Terminator</li>
                <li class="fire" disasterType="Fire"><img src="images/fireicon.png" class="icon">Zombie</li>
                <li class="thunderstorm" disasterType="Thunderstorm"><img src="images/thundericon.png" class="icon">Thunderstorm</li>
                <li class="safehouse" disasterType="Safehouse"><img src="images/safehouseicon.png" class="icon">Safehouse</li>
            </ul>
        </div>
            <div class="modifyAreaForm" style="display: none;">
                <span class="closeIcon">X</span>
                <span class="label">Name</span>
                <input type="text" value="Area2" class="areaName" />
                <span class="label">Type</span>
                <span class="areaType">Zombie</span>
                <span class="label">Description</span>
                <textarea class="areaDescription"></textarea>
            </div>
                </div>
        <div class="btnPanel">
            <div class="btn" id="toggleEditBtn" style="    width: 150px;">Edit mode: Off</div>
            <div class="btn" id="markAreaBtn">Create area</div>
            <div class="btn" id="clearMapBtn">Clear</div>
            <div class="btn" id="saveMapBtn">Save map</div>
        </div>
                </div>
        </div>
        <div class="saveTextArea" style="
    text-align: center;
    margin-bottom: 100px;
    margin-top: 36px;
    font-family: 'Open Sans', sans-serif;
    padding: 0 20%;
    font-size: 75%;"></div>
<div class="crisisReportForm">
    <h1>Create crisis report</h1>
    <span class="formLabel">Disaster type: </span>
    <span id="disasterTypeReport"></span>
    <span class="formLabel">Location:</span>
    <input type="text" id="locationReport" />
    <span class="formLabel">Name:</span>
    <input type="text" id="nameReport" />
    <span class="formLabel">Time:</span>
    <span id="disasterTimeReport"></span>
    <span class="formLabel">Severity:</span>
    <select id="severityReport"><option>1</option><option>2</option><option>3</option><option>4</option><option>5</option></select>
    
    <span class="formLabel">Description:</span>
    <textarea id="descriptionReport"></textarea><br>
    <span id="submitFormBtn" style="cursor: pointer;">Submit</span>
</div>
